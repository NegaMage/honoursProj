{% extends "hospital/base.html" %}

{% block content %}
    <h1 class="display-2">
        Metric 07: Drugs produced most around manufacturer {{manuf}}
    </h1>
    <h2>
    This metric is generated at each manufacturer. We measure the neighbouring manufacturers, and generate receipts of what drugs they produce. Of all the drugs not cleared yet, we generate a count irrespective of how old the stock is. This data can be used by suppliers to find what drugs they can stock up on, without facing much competition. 
    </h2> 
    <br>
    <h2>
    This is an output, generated from our stored tables at Manufacturer {{manuf}}. This metric requires us to query the neighboring manufacturers, to develop an idea of which manufacturers are producing which drugs. No weighing is applied before summing, and the net results will also show which neighbouring manufacturers are prescribing a particular drug, along with a count of the total stock.
    </h2>
    <br>
    
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Item name</th>
                <th scope="col">Count</th>
                <th scope="col">Sold at</th>
            </tr>
        </thead>
        <tbody>
        {% for key,value,hosps in data %}

            <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
                <td>
                    {% for hosp in hosps %}
                        {{hosp}},
                    {% endfor %}
                </td>
            </tr>
        {% endfor %}    
        </tbody>
        </table>
    <hr>

    Total time to execute: {{exectime}} seconds
    
{% endblock content %}